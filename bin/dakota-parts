#!/bin/bash
set -o errexit -o nounset -o pipefail

function intmd_dir_from_binary_dir() {
  binary_dir=$1
  dir=$(dirname $(dirname $binary_dir))
  name=$(basename $binary_dir)
  echo "$dir/intmd/$name"
}

binary_dir=$1
intmd_dir=$(intmd_dir_from_binary_dir $binary_dir)
parts="$intmd_dir/parts.txt"
shift

if [[ $# -eq 0 ]]; then
  echo $parts
else
  mkdir -p $(dirname $parts)
  cat /dev/null > $parts

  for arg in $@; do
    echo $arg >> $parts
  done
fi
