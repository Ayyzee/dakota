// Copyright (C) 2007, 2008, 2009 Robert Nielsen <robert@dakota.org>
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

digraph "driver-file-depends"
{
  graph [ label = "\G", fontcolor = red ];
  graph [ rankdir = LR ];
  edge [ dir = back ];
  node [ shape = rect, style = rounded ];

  "x.cc" [ style = "rounded,bold" ];
  "y.cc" [ style = "rounded,bold" ];
  
  subgraph "cluster-detail"
  {
    graph [ label = "" ];

    "a.ctlg" -> "a.rep";
    "b.ctlg" -> "b.rep";

    "a.rep" -> "z.rep";
    "b.rep" -> "z.rep";

    "x.rep" -> "z.rep";
    "y.rep" -> "z.rep";

    "rt/z.cc" [ color = purple ];
    subgraph
    {
      rank = same;
      "x.rep";
      "y.rep";
      "a.rep";
      "b.rep";
    }
  }

  "x.dk" -> "x.rep" [ weight = 2 ];
  "y.dk" -> "y.rep" [ weight = 2 ];

  "x.dk" -> "x.cc";
  "y.dk" -> "y.cc";
  "z.rep" -> "x.cc";
  "z.rep" -> "y.cc";

  "x.cc" -> "nrt/x.cc";
  "y.cc" -> "nrt/y.cc";

  "a.so" -> "a.ctlg"
  "b.so" -> "b.ctlg"

  "z.rep" -> "nrt/x.cc";
  "z.rep" -> "nrt/y.cc";
  "z.rep" -> "rt/z.cc";

  "x.rep" -> "nrt/x.cc" [ weight = 2 ];
  "y.rep" -> "nrt/y.cc" [ weight = 2 ];

  "nrt/x.cc" -> "nrt/x.o" [ weight = 2 ];
  "nrt/y.cc" -> "nrt/y.o" [ weight = 2 ];
  "rt/z.cc" -> "rt/z.o";

  "nrt/x.o" -> "z.so";
  "nrt/y.o" -> "z.so";
  "rt/z.o" ->  "z.so";

  "x.dk";
  "y.dk";

  "a.so" [ style = none ];
  "b.so" [ style = none ];
  "z.so"  [ style = none ];

  subgraph
  {
    rank = same;
    "x.dk";
    "y.dk";
    "a.so";
    "b.so";
  }
  subgraph
  {
    rank = same;
    "nrt/x.cc";
    "nrt/y.cc";
    "rt/z.cc";
  }
}
