// Copyright (C) 2007, 2008, 2009 Robert Nielsen <robert@dakota.org>
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

digraph "method-selector-pairing"
{
  graph [ label = "\G", fontcolor = red ];
  graph [ rankdir = "LR", center = true, size = "10,7.5" ];
  node [ shape = "box", style = "rounded", width = "1.5" ];

  "foobar:f3(object-t, int32-t value => {})" [ style = "" ];
  {
    "dk:f3(object-t, ...)";
    "foobar:f3(object-t, ...)";
  }
  -> "foobar:va:f3(object-t, va-list-t)"
  -> "foobar:f3(object-t, int32-t value => {})";

  "dk:f3(object-t, ...)"         -> "selector:va:f3(object-t, va-list-t)" [constraint = false, style = dotted];
  "dk:va:f3(object-t, va-list-t)" -> "selector:va:f3(object-t, va-list-t)" [constraint = false, style = dotted];
  "selector:va:f3(object-t, va-list-t)" -> "foobar:f3(object-t, ...)" [ style = dashed, label = "dk:method-for()" ];
  "selector:va:f3(object-t, va-list-t)" -> "foobar:va:f3(object-t, va-list-t)" [ style = dashed, label = "dk:va-method-for()" ];

  "foobar:va:f2(object-t, va-list-t)" [ style = "" ];
  {
    "dk:f2(object-t, ...)";
    "foobar:f2(object-t, ...)";
  }
  -> "foobar:va:f2(object-t, va-list-t)";

  "dk:f2(object-t, ...)"         -> "selector:va:f2(object-t, va-list-t)" [constraint = false, style = dotted];
  "dk:va:f2(object-t, va-list-t)" -> "selector:va:f2(object-t, va-list-t)" [constraint = false, style = dotted];
  "selector:va:f2(object-t, va-list-t)" -> "foobar:va:f2(object-t, va-list-t)" [ style = dashed, label = "dk:va-method-for()" ];
  "selector:va:f2(object-t, va-list-t)" -> "foobar:f2(object-t, ...)" [ style = dashed, label = "dk:method-for()" ];
  
  "foobar:f1(object-t)" [ style = "" ];
  "dk:f1(object-t)"              -> "foobar:f1(object-t)";

  "dk:f1(object-t)"              -> "selector:f1(object-t)"      [constraint = false, style = dotted];
  "selector:f1(object-t)"      -> "foobar:f1(object-t)" [ style = dashed, label = "dk:method-for()" ];

  {
    rank = same;
    "dk:f1(object-t)";
    "dk:f2(object-t, ...)";
    "dk:va:f2(object-t, va-list-t)";
    "dk:f3(object-t, ...)";
    "dk:va:f3(object-t, va-list-t)";
  }

  {
    rank = same;
    "selector:f1(object-t)";
    "selector:va:f2(object-t, va-list-t)";
    "selector:va:f3(object-t, va-list-t)";
  }
  { rank = same; "foobar:f1(object-t)"; "foobar:f3(object-t, int32-t value => {})"; }
  { rank = same; "foobar:va:f2(object-t, va-list-t)"; "foobar:va:f3(object-t, va-list-t)"; }
  { rank = same; "foobar:f2(object-t, ...)"; "foobar:f3(object-t, ...)"; }
}
