# -*- mode: cperl -*-
# -*- cperl-close-paren-offset: -2 -*-
# -*- cperl-continued-statement-offset: 2 -*-
# -*- cperl-indent-level: 2 -*-
# -*- cperl-indent-parens-as-block: t -*-
# -*- cperl-tab-always-indent: t -*-
{
  'CXX' => [ 'clang++' ],
  'CXXFLAGS' => [
    '-std=c++14', '-fvisibility=hidden',
    '-fnon-call-exceptions', '-fasynchronous-unwind-tables',
    '-ftrapv',
    '-fsanitize=address',
    #'-ObjC++', '-fobjc-exceptions', '-lobjc',
    #'-fuse-ld=gold', '-use-gold-plugin',
    #'-flto', # must also be in LDFLAGS!!!
  ],
  'CXX_COMPILE_FLAGS' => [
    '--compile', '-fPIC',
    #'--language=objective-c++',
  ],
  'CXX_DEFINE_MACRO_FLAGS' => [ '--define-macro' ],
  'CXX_FOR_LINKER_FLAGS' => [ '--for-linker' ],
  'CXX_INCLUDE_DIRECTORY_FLAGS' => [ '--include-directory' ],
  'CXX_LIBRARY_DIRECTORY_FLAGS' => [ '--library-directory' ],
  'CXX_LIBRARY_FLAGS' => [ '--library' ],
  'CXX_NO_WARNINGS_FLAGS' => [ '--no-warnings' ],
  'CXX_OUTPUT_FLAGS' =>      [ '--output' ],
  'CXX_SHARED_FLAGS' =>      [ '--shared' ],
  'EXTRA_CXXFLAGS' => [
    '--warn-everything',
    '--warn-no-class-varargs',
    '--warn-non-pod-varargs', # must follow --warn-no-class-varargs
    '--warn-no-c++98-compat',
    '--warn-no-c++98-compat-pedantic',
    '--warn-no-c99-extensions', # c99 designated initializers, c99 compound literals
    '--warn-no-cast-align',
    '--warn-no-dollar-in-identifier-extension',
    '--warn-no-disabled-macro-expansion',
    '--warn-no-exit-time-destructors',
    '--warn-no-four-char-constants',
    '--warn-no-global-constructors',
    '--warn-no-multichar',
    '--warn-no-old-style-cast',
    '--warn-no-padded',
    '--warn-no-unknown-warning-option',
    '--warn-no-unused-command-line-argument',
  ],
  #'LDFLAGS' => [ '-flto' ], # must also be in CXXFLAGS!!!
  'LD_NO_UNDEFINED_FLAGS' => [ '--no-undefined' ],
  'LD_SONAME_FLAGS' => [ '-soname' ],
  'cc_ext' => 'cc',
  'hh_ext' => 'hh',
  'o_ext' =>  'o',
  'so_ext' => 'so',
}
# gold: --no-allow-shlib-undefined
# gold: --demangle
# gold: --no-undefined (warning only?)
# gold: --threads
# gold: --error-unresolved-symbols
