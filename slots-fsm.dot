// -*- mode: c++ -*-

// slots <fq-type> ;

// slots        ;
// slots        { ... }
// slots struct ;
// slots struct { ... }
// slots union  ;
// slots union  { ... }

// slots enum                    ;
// slots enum                    { ... }
// slots enum        : <fq-type> ;
// slots enum        : <fq-type> { ... }
// slots enum struct             ;
// slots enum struct             { ... }
// slots enum struct : <fq-type> ;
// slots enum struct : <fq-type> { ... }

digraph "slots-fsm" {
  graph [ rankdir = LR, label = "\G", fontcolor = red ];
  edge [ fontname = "courier" ];
  node [ shape = circle, fontsize = 12, width = 0.3, fixedsize = true ];
  node [ label = "", width = 0.1 ];

  000:n -> 010:w [ label = "slots", weigth = 5 ];
  010 -> 020 [ label = "enum", weight = 5 ];
  010:n -> 030:n [ label = "enum" ];
  010:n -> 050:n [ label = "enum" ];
  020 -> 030 [ label = "struct", weight = 5 ];
  020:s -> 025:w [ label = ";" ];
  030 -> 040 [ label = ":", weight = 5 ];
  030:s -> 035:w [ label = ";" ];
  040 -> 050 [ label = "<fq-type>", fontcolor = blue, weight = 5 ];
  050:s -> 055:w [ label = ";" ];
  050 -> 060 [ label = "{", weight = 5 ];
  060 -> 070 [ label = "<enum-body-in>", fontcolor = blue ];
  070 -> 080 [ label = "}" ];

  000:s -> 100:s [ label = "slots" ];
  140 -> 100 [ label = "struct", weight = 5 ];
  140:n -> 100:n [ label = "union" ];
  100 -> 110 [ label = "{", weight = 5 ];
  100:n -> 105:w [ label = ";" ];
  110 -> 120 [ label = "<struct-union-body-in>", fontcolor = blue ];
  120 -> 130 [ label = "}" ];

  000 -> 140 [ label = "slots", weight = 3 ];
  140:n -> 150:w [ label = "<fq-type>", fontcolor = blue ];
  150 -> 155 [ label = ";", weight = 2 ];

  subgraph {
    graph [ rank = same ];
    050;
    100;
  }
  subgraph {
    graph [ rank = same ];
    040;
    140;
  }
  subgraph {
    graph [ rank = same ];
    025;
    035;
    055;
    105;
    155;
  }
}
