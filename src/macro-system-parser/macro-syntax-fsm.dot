// Copyright (C) 2007 - 2015 Robert Nielsen <robert@dakota.org>
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

digraph "macro-syntax-fsm"
{
  graph [ label = "\G", fontcolor = red, fontsize = 16 ];
  graph [ rankdir = "LR",
          center = true,
          //size = "7.5,10",
          //page = "8.5,11",
          ];

  node [ shape = circle, width = 0.6, fontsize = 16 ];
  //node [ label = "" ]; // comment out this line if you want the node names displayed

  // on OS X/darwin it wants Courier-Bold and Courier-Oblique
  edge [ fontname = "Courier-Bold", minlen = 2.0, fontsize = 16 ];

  st [ style = invis ];
  14 [ shape = doublecircle ];

  st -> 00 [ weight = 5.0 ];
  00 -> 01 [ label = "main", weight = 5.0 ];
  00 -> 02 [ label = "macro", tailport = n, headport = n ];
  01 -> 02 [ label = "macro", weight = 5.0 ];
  02 -> 03 [ label = "ident", weight = 5.0, fontname = "Courier-Oblique" ];
  03 -> 04 [ label = "[", weight = 5.0 ];
  03 -> 06 [ label = "{", tailport = n, headport = n ];
  04 -> 04 [ label = "ident", fontname = "Courier-Oblique", tailport = s, headport = s, dir = back, color = blue ];
  04 -> 05 [ label = "]", weight = 5.0 ];
  05 -> 06 [ label = "{", weight = 5.0 ];

  06 -> 07 [ label = "ident", weight = 5.0, fontname = "Courier-Oblique" ];
  06 -> 08 [ label = "{", tailport = n, headport = n ];
  07 -> 08 [ label = "{", weight = 5.0 ];
  08 -> 06 [ label = "}", headport = s, tailport = s, color = blue ]; // back
  
  08 -> 09 [ label = "pattern", weight = 5.0, fontname = "Courier-Oblique" ];
  08 -> 10 [ label = "}", tailport = n, headport = n ];
  09 -> 06 [ label = "}", headport = s, tailport = s, color = blue ]; // back

  09 -> 10 [ label = "}", weight = 5.0 ];
  10 -> 11 [ label = "=>", weight = 5.0 ];
  11 -> 12 [ label = "{", weight = 5.0 ];
  12 -> 13 [ label = "template", weight = 5.0, fontname = "Courier-Oblique" ];
  12 -> 06 [ label = "}", headport = s, tailport = s, color = blue ]; // back
  13 -> 06 [ label = "}", headport = s, tailport = s, color = blue ]; // back

  14 -> 06 [ label = "}", dir = back ]; //tailport = n, headport = s ]; // instead of dir = back
  subgraph { graph [ rank = same ]; 06; 14; }
}
