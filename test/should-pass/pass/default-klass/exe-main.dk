// -*- mode: Dakota; c-basic-offset: 2; tab-width: 2; indent-tabs-mode: nil -*-

klass no-such-method-exception;
klass missing-keyword-exception;
klass exception;

klass k1-klass
{
  // default klass
  superklass klass;

  method bar(object-t self) -> object-t {
    throw "oops!"; // this should never get called
    return self;
  }
}

klass o1
{
  klass k1-klass;
  // default superklass is 'object'

  method foo(object-t self) -> object-t {
    // the klass klass, not the klass k1-klass
    object-t kls = klass-of(klass-of(self));
    $bar(kls); // this should fail
    return self;
  }
}

klass o2
{
  // default klass
  superklass o1;
}

int-t main() {
  try {
    object-t i2 = make(o2::klass);
    $foo(i2);
  } catch (no-such-method-exception::klass e) {
    //
  }
  return 0;
}
