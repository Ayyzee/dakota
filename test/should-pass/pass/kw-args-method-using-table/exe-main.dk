// -*- mode: Dakota; c-basic-offset: 2; tab-width: 2; indent-tabs-mode: nil -*-

#include <string.h>
#include <assert.h>

int32-t arg1 = 42;
const char8-t* arg2 = "so long and ...";

klass k1
{
  method object-t init(object-t self, int32-t meaning-of-life : 0, const char8-t* message : nullptr)
  {
    self = $init(super);
    assert(arg1 == meaning-of-life);
    assert(0 == strcmp(arg2, message));
    return self;
  }
}

klass k2
{
  superklass k1;

  method object-t va::init(object-t self, va-list-t args)
  {
    self = $va::init(super, args);
    //
    return self;
  }
}

int-t main()
{
  object-t o = make(k2::klass, #meaning-of-life : arg1, #message : arg2);
  USE(o);
  return 0;
}
