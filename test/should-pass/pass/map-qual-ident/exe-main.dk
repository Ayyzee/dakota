// -*- mode: Dakota; c-basic-offset: 2; tab-width: 2; indent-tabs-mode: nil -*-

klass int32;
klass vector;

namespace foo::bar { static object-t seq1; }

int-t main() {
  foo::bar::seq1 = make(vector::klass, #items : { 0, 1, 2, 3, 4, 5 });
  object-t seq2 = map(foo::bar::seq1, { if (int32::unbox(_) % 2) return _; return nullptr; });
  for (object-t e in seq2) {
    unless (int32::unbox(e) % 2)
      std::abort();
  }
  return 0;
}
