// -*- mode: Dakota; c-basic-offset: 2; tab-width: 2; indent-tabs-mode: nil -*-

klass features; // hackhack
klass json-object-output-stream;
klass string;
klass vector;

int-t main() {
//   int-t overwrite;
//   setenv("DK_ENABLE_TRACE", "", overwrite = 1);

  object-t vector = make(vector::klass);

  object-t o1 = make(string::klass, #bytes : "mother");
  object-t o2 = make(string::klass, #bytes : "father");

  $add-last(vector, o1);
  $add-last(vector, vector);
  $add-last(vector, klass-of(vector));
  $add-last(vector, null);
  $add-last(vector, o2);

  {
    object-t json-object-output-stream = make(json-object-output-stream::klass);
    $write(json-object-output-stream, vector);
    $close(json-object-output-stream);
  }
//   {
//   object-t xml-object-output-stream = make(xml-object-output-stream::klass);
//   $write(xml-object-output-stream, vector);
//   }

  return 0;
}
