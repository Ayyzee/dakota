// -*- mode: Dakota; c-basic-offset: 2; tab-width: 2; indent-tabs-mode: nil -*-

#include <stdio.h>

klass k1
{
  superklass object;
}

klass k2
{
  superklass k1;
}

klass k3
{
  superklass k2;
}

#define DUMP(val, cmd) printf("%i == %i = " # cmd "\n", val, cmd)

int
main() {
  object-t o1 = make(k1::klass);
  object-t o2 = make(k2::klass);
  object-t o3 = make(k3::klass);

  DUMP(0, $subklass?(klass-of(o1), k1::klass));
  DUMP(1, $subklass?(klass-of(o2), k1::klass));
  DUMP(1, $subklass?(klass-of(o3), k1::klass));

  DUMP(0, $subklass?(klass-of(o1), k2::klass));
  DUMP(0, $subklass?(klass-of(o2), k2::klass));
  DUMP(1, $subklass?(klass-of(o3), k2::klass));

  DUMP(0, $subklass?(klass-of(o1), k3::klass));
  DUMP(0, $subklass?(klass-of(o2), k3::klass));
  DUMP(0, $subklass?(klass-of(o3), k3::klass));

  return 0;
}
